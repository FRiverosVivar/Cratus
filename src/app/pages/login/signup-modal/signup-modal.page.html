<ion-content class="background-image">

  <ion-grid style="height: 100%">
    <ion-row>
      <ion-col>
        <img src="assets/imgs/logo_inicio.png" style="margin: auto; width: 75px; display: block;">
      </ion-col>
    </ion-row>
    <ion-row style="height: 100%;">
      <ion-col> </ion-col>
      <ion-col size="10" style="margin: auto">
        <div class="signup">
          <form [formGroup]="registroForm" (ngSubmit)="registrar()" #ngForm="ngForm">
            <div *ngIf="this.status == 0">
              <p class="label"> Nombre </p>
              <input type="text" formControlName="nombre" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.nombre.errors" class="invalid-feedback">
                <div *ngIf="f.nombre.errors.required">Se require el nombre del usuario</div>
              </div>

              <p class="label"> Apellidos </p>
              <input type="text" formControlName="apellidos" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.apellidos.errors" class="invalid-feedback">
                <div *ngIf="f.apellidos.errors.required">Se require los apellidos del usuario</div>
              </div>

              <p class="label"> Rut </p>
              <input type="text" formControlName="rut" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.rut.errors" class="invalid-feedback">
                <div *ngIf="f.rut.errors.required">Se require el rut del usuario</div>
              </div>

              <p class="label"> Sexo </p>
              <ion-select formControlName="sexo" style="color:#fdd" placeholder="Seleccione uno">
                <ion-select-option value="femenino"> Femenino </ion-select-option>
                <ion-select-option value="masculino"> Masculino </ion-select-option>
              </ion-select>
              <div *ngIf="ngForm.submitted && f.sexo.errors" class="invalid-feedback">
                <div *ngIf="f.sexo.errors.required">Se require el sexo del usuario</div>
              </div>

              <p class="label"> Nacionalidad </p>
              <input type="text" formControlName="nacionalidad" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.nacionalidad.errors" class="invalid-feedback">
                <div *ngIf="f.nacionalidad.errors.required">Se require la nacionalidad del usuario</div>
              </div>

              <p class="label"> Pais </p>
              <ion-select formControlName="pais_residencia" style="color:#fdd" placeholder="Seleccione uno" (ionChange)="seleccionPais()">
                <ion-select-option *ngFor="let pais of paises" [value]="pais">{{pais.countryName}}</ion-select-option>
              </ion-select>
              <div *ngIf="ngForm.submitted && f.pais_residencia.errors" class="invalid-feedback">
                <div *ngIf="f.pais_residencia.errors.required">Se require el pais del usuario</div>
              </div>

              <p class="label"> Region </p>
              <ion-select formControlName="region_residencia" style="color:#fdd" placeholder="Seleccione uno">
                <ion-select-option *ngFor="let region of regiones" [value]="region">{{region.name}}</ion-select-option>
              </ion-select>
              <div *ngIf="ngForm.submitted && f.region_residencia.errors" class="invalid-feedback">
                <div *ngIf="f.region_residencia.errors.required">Se require la region del usuario</div>
              </div>

              <ion-button color="danger" expand="block" type="button" (click)='continuar()'> Continuar </ion-button>

            </div>

            <div *ngIf="this.status == 1">
              <p class="label"> Teléfono </p>
              <input type="text" formControlName="telefono" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.telefono.errors" class="invalid-feedback">
                <div *ngIf="f.telefono.errors.required">Se require el teléfono del usuario</div>
              </div>

              <p class="label"> Altura </p>
              <input type="text" formControlName="altura" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.altura.errors" class="invalid-feedback">
                <div *ngIf="f.altura.errors.required">Se require la altura del usuario</div>
              </div>

              <p class="label"> Peso </p>
              <input type="text" formControlName="peso" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.peso.errors" class="invalid-feedback">
                <div *ngIf="f.peso.errors.required">Se require el peso del usuario</div>
              </div>

              <p class="label"> Fecha de nacimiento </p>
              <ion-datetime formControlName="fecha_nacimiento" displayFormat="D/M/YYYY" min="1970" max="2010" placeholder="Seleccione una fecha" style="color:#fdd"></ion-datetime>
              <div *ngIf="ngForm.submitted && f.fecha_nacimiento.errors" class="invalid-feedback">
                <div *ngIf="f.fecha_nacimiento.errors.required">Se require fecha de nacimiento</div>
              </div>

              <p class="label"> Email </p>
              <input type="text" formControlName="email" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.email.errors" class="invalid-feedback">
                <div *ngIf="f.email.errors.required">Se require el correo del usuario</div>
              </div>

              <p class="label"> Contraseña </p>
              <input type="password" formControlName="password" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.password.errors" class="invalid-feedback">
                <div *ngIf="f.password.errors.required">Se require una contraseña </div>
              </div>

              <p class="label"> Repetir Contraseña </p>
              <input type="password" formControlName="passwordverify" class="form-control"/>
              <div *ngIf="ngForm.submitted && f.passwordverify.errors" class="invalid-feedback">
                <div *ngIf="f.passwordverify.errors.required"> Confirme la contraseña </div>
              </div>
              <br>

              <label style="font-size: .7rem; color: #f4f5f8">
                <input type="checkbox" formControlName="polis" />
                Acepto politicas de privacidad
              </label>
              <span style="text-decoration: underline; color: red; font-size: .7rem" (click)="openBrowser('https://cratus.herokuapp.com/politicas_y_privacidad')"> (ver) </span>
              <div *ngIf="ngForm.submitted && f.polis.errors" class="invalid-feedback">
                <div *ngIf="f.polis.errors.pattern"> Falta checkear </div>
              </div>
              <br>
              <label style="font-size: .7rem; color: #f4f5f8">
                <input type="checkbox" formControlName="term" />
                Acepto terminos y condiciones de uso
              </label>
              <span style="text-decoration: underline; color: red; font-size: .7rem" (click)="openBrowser('https://cratus.herokuapp.com/condiciones')"> (ver) </span>
              <div *ngIf="ngForm.submitted && f.term.errors" class="invalid-feedback">
                <div *ngIf="f.term.errors.pattern"> Falta checkear </div>
              </div>

              <div style="margin-top: 1rem;">
                <ion-button color="danger" expand="block" type="submit">Registrar</ion-button>
                <ion-button color="medium" expand="block" type="reset" (click)='cancel()'>Cancel</ion-button>
              </div>
            </div>

          </form>
        </div>
      </ion-col>
      <ion-col> </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
